# Internationalisierung (i18n) Unterstützung

[English](../en/I18N.md) | [日本語](../ja/I18N.md) | Deutsch | [Français](../fr/I18N.md) | [简体中文](../zh_CN/I18N.md)

## Übersicht
Das Gemini Mail Review Add-on unterstützt jetzt Internationalisierung und zeigt die Benutzeroberfläche automatisch in der Sprache an, die den Spracheinstellungen von Thunderbird entspricht.

## Unterstützte Sprachen
- **English (en)** - Standardsprache
- **Japanese (ja)** - 日本語対応
- **German (de)** - Deutsch-Unterstützung
- **French (fr)** - Support français
- **Simplified Chinese (zh_CN)** - 简体中文支持

## Funktionen
- Automatische Spracherkennung basierend auf Thunderbird's Gebietsschema
- Rückfall auf Englisch, wenn das aktuelle Gebietsschema nicht unterstützt wird
- Alle UI-Elemente sind übersetzt, einschließlich:
  - Erweiterungsname und Beschreibung
  - Optionsseite (Einstellungen)
  - Popup-Oberfläche (E-Mail-Überprüfung)
  - Schaltflächen, Beschriftungen und Meldungen
  - Fehlermeldungen und Statustext

## Implementierungsdetails

### Verzeichnisstruktur
```
_locales/
├── en/
│   └── messages.json    # Englische Übersetzungen
├── ja/
│   └── messages.json    # Japanische Übersetzungen
├── de/
│   └── messages.json    # Deutsche Übersetzungen
├── fr/
│   └── messages.json    # Französische Übersetzungen
└── zh_CN/
    └── messages.json    # Vereinfachtes Chinesisch Übersetzungen
```

### Funktionsweise
1. Das Add-on verwendet die WebExtension `browser.i18n` API
2. Thunderbird erkennt automatisch seine aktuelle Gebietsschema-Einstellung
3. Das Add-on lädt die entsprechende `messages.json` Datei
4. Aller UI-Text wird zur Laufzeit durch lokalisierte Zeichenfolgen ersetzt
5. Wenn ein Gebietsschema nicht unterstützt wird, wird Englisch als Standard verwendet

### Beispielübersetzungen

#### Erweiterungsname
- English: "Gemini Mail Review"
- Japanese: "Gemini メールレビュー"
- German: "Gemini Mail Review"

#### Titel der Optionsseite
- English: "Gemini Mail Review Settings"
- Japanese: "Gemini メールレビュー 設定"
- German: "Gemini Mail Review Einstellungen"

#### Speichern-Schaltfläche
- English: "Save Settings"
- Japanese: "設定を保存"
- German: "Einstellungen speichern"

#### Fehlermeldungen
- English: "Please configure your Gemini API key in the settings."
- Japanese: "設定で Gemini API キーを設定してください。"
- German: "Bitte konfigurieren Sie Ihren Gemini API-Schlüssel in den Einstellungen."

#### Benutzerdefinierte Prompt-Vorlagen
- English: "Custom Prompt Templates:"
- Japanese: "カスタムプロンプトテンプレート:"
- German: "Benutzerdefinierte Prompt-Vorlagen:"

#### Vorlagenauswahl
- English: "Select Custom Prompt Template:"
- Japanese: "カスタムプロンプトテンプレートを選択:"
- German: "Benutzerdefinierte Prompt-Vorlage auswählen:"

#### Vorlagennamen
- English: "Template 1 Name:", "Template 2 Name:", "Template 3 Name:"
- Japanese: "テンプレート1の名前:", "テンプレート2の名前:", "テンプレート3の名前:"
- German: "Vorlage 1 Name:", "Vorlage 2 Name:", "Vorlage 3 Name:"

## Wie testen

### Thunderbird's Sprache ändern
1. Thunderbird öffnen
2. Gehe zu **Einstellungen** > **Allgemein** > **Sprache**
3. Wähle deine bevorzugte Sprache (Englisch, Japanisch, Deutsch, etc.)
4. Thunderbird neu starten
5. Öffne die Add-on-Optionen oder Popup - es wird in der ausgewählten Sprache angezeigt

### Sprachunterstützung überprüfen
1. Add-on in Thunderbird installieren
2. Mit englischem Gebietsschema testen:
   - Thunderbird-Sprache auf Englisch setzen
   - Thunderbird neu starten
   - Add-on-Einstellungen öffnen - sollte auf Englisch angezeigt werden
3. Mit japanischem Gebietsschema testen:
   - Thunderbird-Sprache auf Japanisch (日本語) setzen
   - Thunderbird neu starten
   - Add-on-Einstellungen öffnen - sollte auf Japanisch angezeigt werden

## Neue Sprachen hinzufügen

Um Unterstützung für zusätzliche Sprachen hinzuzufügen:

1. Neues Gebietsschema-Verzeichnis erstellen:
   ```bash
   mkdir -p _locales/{locale_code}/
   ```

2. Englische Nachrichtendatei als Vorlage kopieren:
   ```bash
   cp _locales/en/messages.json _locales/{locale_code}/messages.json
   ```

3. Alle Nachrichtenwerte in der neuen `messages.json` Datei übersetzen:
   ```json
   {
     "extensionName": {
       "message": "Ihre Übersetzung hier",
       "description": "Name of the extension"
     },
     ...
   }
   ```

4. Testen, indem Sie Thunderbird auf das neue Gebietsschema setzen

### Beispiel: Französische Unterstützung hinzufügen
```bash
mkdir -p _locales/fr/
cp _locales/en/messages.json _locales/fr/messages.json
# Bearbeite _locales/fr/messages.json und übersetze alle "message"-Werte ins Französische
```

## Technische Details

### Verwendete API
- `browser.i18n.getMessage(messageName)` - Lokalisierte Zeichenfolge abrufen
- `browser.i18n.getUILanguage()` - Aktuelles Gebietsschema abrufen (optional)

### Geänderte Dateien
- `manifest.json` - `default_locale` und i18n-Platzhalter hinzugefügt
- `options.html` - `data-i18n` Attribute zu Textelementen hinzugefügt
- `options.js` - `localizeUI()` Funktion zum Laden lokalisierter Zeichenfolgen hinzugefügt
- `popup.html` - `data-i18n` Attribute zu Textelementen hinzugefügt
- `popup.js` - `localizeUI()` Funktion zum Laden lokalisierter Zeichenfolgen hinzugefügt

### Lokalisierungsprozess
1. Seite lädt, HTML enthält englischen Text als Fallback
2. `localizeUI()` Funktion wird bei `DOMContentLoaded` aufgerufen
3. Funktion fragt alle Elemente mit `data-i18n` Attributen ab
4. Für jedes Element wird die lokalisierte Nachricht mit `browser.i18n.getMessage()` abgerufen
5. Aktualisiert `textContent` oder `placeholder` des Elements mit lokalisierter Zeichenfolge

## Browser-Kompatibilität
- Thunderbird 102.0 und später (volle Unterstützung)
- Alle modernen WebExtension-kompatiblen Browser (falls portiert)

## Hinweise
- Die i18n-Implementierung folgt Mozilla's WebExtension-Standards
- Alle Zeichenfolgen werden im JSON-Format für einfache Wartung gespeichert
- Das System ist erweiterbar - neue Sprachen können ohne Codeänderungen hinzugefügt werden
- Fallback stellt sicher, dass das Add-on immer funktioniert, auch mit nicht unterstützten Gebietsschemas
