# Support de l'internationalisation (i18n)

[English](../en/I18N.md) | [日本語](../ja/I18N.md) | [Deutsch](../de/I18N.md) | Français | [简体中文](../zh_CN/I18N.md)

## Aperçu
Le module complémentaire Gemini Mail Review prend désormais en charge l'internationalisation, affichant automatiquement l'interface utilisateur dans la langue correspondant aux paramètres de langue de Thunderbird.

## Langues prises en charge
- **English (en)** - Langue par défaut
- **Japanese (ja)** - 日本語対応
- **German (de)** - Deutsch-Unterstützung
- **French (fr)** - Support français
- **Simplified Chinese (zh_CN)** - 简体中文支持

## Fonctionnalités
- Détection automatique de la langue basée sur les paramètres régionaux de Thunderbird
- Repli sur l'anglais si les paramètres régionaux actuels ne sont pas pris en charge
- Tous les éléments de l'interface utilisateur sont traduits, y compris :
  - Nom et description de l'extension
  - Page d'options (paramètres)
  - Interface popup (révision des e-mails)
  - Boutons, étiquettes et messages
  - Messages d'erreur et texte d'état

## Détails d'implémentation

### Structure des répertoires
```
_locales/
├── en/
│   └── messages.json    # Traductions anglaises
├── ja/
│   └── messages.json    # Traductions japonaises
├── de/
│   └── messages.json    # Traductions allemandes
├── fr/
│   └── messages.json    # Traductions françaises
└── zh_CN/
    └── messages.json    # Traductions en chinois simplifié
```

### Comment ça fonctionne
1. Le module complémentaire utilise l'API WebExtension `browser.i18n`
2. Thunderbird détecte automatiquement son paramètre régional actuel
3. Le module complémentaire charge le fichier `messages.json` correspondant
4. Tout le texte de l'interface utilisateur est remplacé par des chaînes localisées au moment de l'exécution
5. Si un paramètre régional n'est pas pris en charge, l'anglais est utilisé par défaut

### Exemples de traductions

#### Nom de l'extension
- English: "Gemini Mail Review"
- Japanese: "Gemini メールレビュー"
- French: "Gemini Mail Review"

#### Titre de la page d'options
- English: "Gemini Mail Review Settings"
- Japanese: "Gemini メールレビュー 設定"
- French: "Paramètres de Gemini Mail Review"

#### Bouton Enregistrer
- English: "Save Settings"
- Japanese: "設定を保存"
- French: "Enregistrer les paramètres"

#### Messages d'erreur
- English: "Please configure your Gemini API key in the settings."
- Japanese: "設定で Gemini API キーを設定してください。"
- French: "Veuillez configurer votre clé API Gemini dans les paramètres."

#### Modèles de prompt personnalisés
- English: "Custom Prompt Templates:"
- Japanese: "カスタムプロンプトテンプレート:"
- French: "Modèles de prompt personnalisés :"

#### Sélection de modèle
- English: "Select Custom Prompt Template:"
- Japanese: "カスタムプロンプトテンプレートを選択:"
- French: "Sélectionner un modèle de prompt personnalisé :"

#### Noms de modèles
- English: "Template 1 Name:", "Template 2 Name:", "Template 3 Name:"
- Japanese: "テンプレート1の名前:", "テンプレート2の名前:", "テンプレート3の名前:"
- French: "Nom du modèle 1 :", "Nom du modèle 2 :", "Nom du modèle 3 :"

## Comment tester

### Changer la langue de Thunderbird
1. Ouvrir Thunderbird
2. Aller à **Paramètres** > **Général** > **Langue**
3. Sélectionner votre langue préférée (anglais, japonais, français, etc.)
4. Redémarrer Thunderbird
5. Ouvrir les options ou le popup du module complémentaire - il s'affichera dans la langue sélectionnée

### Vérifier le support linguistique
1. Installer le module complémentaire dans Thunderbird
2. Tester avec les paramètres régionaux anglais :
   - Définir la langue de Thunderbird sur anglais
   - Redémarrer Thunderbird
   - Ouvrir les paramètres du module complémentaire - devrait s'afficher en anglais
3. Tester avec les paramètres régionaux japonais :
   - Définir la langue de Thunderbird sur japonais (日本語)
   - Redémarrer Thunderbird
   - Ouvrir les paramètres du module complémentaire - devrait s'afficher en japonais

## Ajouter de nouvelles langues

Pour ajouter la prise en charge de langues supplémentaires :

1. Créer un nouveau répertoire de paramètres régionaux :
   ```bash
   mkdir -p _locales/{locale_code}/
   ```

2. Copier le fichier de messages anglais comme modèle :
   ```bash
   cp _locales/en/messages.json _locales/{locale_code}/messages.json
   ```

3. Traduire toutes les valeurs de message dans le nouveau fichier `messages.json` :
   ```json
   {
     "extensionName": {
       "message": "Votre traduction ici",
       "description": "Name of the extension"
     },
     ...
   }
   ```

4. Tester en définissant Thunderbird sur les nouveaux paramètres régionaux

### Exemple : Ajout du support espagnol
```bash
mkdir -p _locales/es/
cp _locales/en/messages.json _locales/es/messages.json
# Modifier _locales/es/messages.json et traduire toutes les valeurs "message" en espagnol
```

## Détails techniques

### API utilisée
- `browser.i18n.getMessage(messageName)` - Obtenir une chaîne localisée
- `browser.i18n.getUILanguage()` - Obtenir les paramètres régionaux actuels (optionnel)

### Fichiers modifiés
- `manifest.json` - Ajout de `default_locale` et des espaces réservés i18n
- `options.html` - Ajout d'attributs `data-i18n` aux éléments de texte
- `options.js` - Ajout de la fonction `localizeUI()` pour charger les chaînes localisées
- `popup.html` - Ajout d'attributs `data-i18n` aux éléments de texte
- `popup.js` - Ajout de la fonction `localizeUI()` pour charger les chaînes localisées

### Processus de localisation
1. La page se charge, le HTML contient du texte anglais comme repli
2. La fonction `localizeUI()` est appelée sur `DOMContentLoaded`
3. La fonction interroge tous les éléments avec des attributs `data-i18n`
4. Pour chaque élément, obtient le message localisé en utilisant `browser.i18n.getMessage()`
5. Met à jour le `textContent` ou le `placeholder` de l'élément avec la chaîne localisée

## Compatibilité du navigateur
- Thunderbird 102.0 et ultérieur (support complet)
- Tous les navigateurs modernes compatibles WebExtension (si porté)

## Notes
- L'implémentation i18n suit les normes WebExtension de Mozilla
- Toutes les chaînes sont stockées au format JSON pour une maintenance facile
- Le système est extensible - de nouvelles langues peuvent être ajoutées sans modifications de code
- Le repli garantit que le module complémentaire fonctionne toujours, même avec des paramètres régionaux non pris en charge
